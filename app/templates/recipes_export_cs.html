{% extends "base.html" %}
{% block title %}Export receptu{% endblock %}
{% block content %}
    <h1>Export vybraných receptů</h1>

    {% if recipes_by_category %}
    <form method="post" action="/recipes/export/scale">
      <input type="hidden" name="lang" value="cs" />
      <label>Klient</label><br />
      <input type="text" name="client_name" required />
      <br /><br />

      <table>
        <tr>
          <th>Kategorie</th>
          <th>Recepty</th>
          <th>Aktuální (kJ)</th>
          <th>Cílové na recept (kJ)</th>
          <th>Cílové (kJ)</th>
        </tr>
        {% for category in ["breakfast", "lunch", "dinner", "snack"] %}
        <tr>
          <td>{{ category | capitalize }}</td>
          <td>
            <ul>
              {% for r in recipes_by_category.get(category, []) %}
              <li>{{ r.name }}</li>
              <input type="hidden" name="recipe_ids" value="{{ r.id }}" />
              {% endfor %}
            </ul>
          </td>
          <td>
            <ul>
              {% for r in recipes_by_category.get(category, []) %}
              <li>{{ r.energy_kj }}</li>
              {% endfor %}
            </ul>
          </td>
          <td>
            <ul>
              {% for r in recipes_by_category.get(category, []) %}
              <li>
                <input
                  type="number"
                  name="target_kj_recipe_{{ r.id }}"
                  step="1"
                  min="0"
                />
              </li>
              {% endfor %}
            </ul>
          </td>
          <td>
            <input type="number" name="target_kj_{{ category }}" step="1" min="0" />
          </td>
        </tr>
        {% endfor %}
      </table>

      <br />
      <button type="submit">Přepočítat vybrané recepty</button>
    </form>
    {% else %}
    <p>Nebyly vybrány žádné recepty.</p>
    {% endif %}

    <a href="/recipes/meal-plan">Zpět na výběr</a>
{% endblock %}
